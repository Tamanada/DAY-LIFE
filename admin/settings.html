<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DAYLIFE â€“ ParamÃ¨tres</title>
  <link rel="stylesheet" href="assets/admin.css" />
</head>

<body>
  <!-- ğŸ” Protection admin -->
  <script>
    const role = localStorage.getItem("userRole");
    const isAdmin = localStorage.getItem("adminLoggedIn");
    if (!isAdmin || role !== "admin") {
      window.location.href = "../home.html";
    }
  </script>

  <!-- ğŸŒ™ Menu latÃ©ral -->
  <aside class="sidebar hidden" id="sidebar">
    <h1>ğŸŒ• DAYLIFE Admin</h1>
    <nav class="menu">
      <a href="dashboard.html">ğŸ“Š Tableau de bord</a>
      <a href="users.html">ğŸ‘¥ Utilisateurs</a>
      <a href="settings.html" class="active">âš™ï¸ ParamÃ¨tres</a>
      <a href="../home.html">ğŸ  Application</a>
    </nav>
    <button id="logoutBtn" class="logout-btn">Se dÃ©connecter</button>
  </aside>

  <!-- ğŸ” Menu burger -->
  <div class="burger" id="burger">
    <span></span><span></span><span></span>
  </div>

  <!-- ğŸŒ• Contenu principal -->
  <main class="admin-main">
    <header class="admin-top">
      <h2>ParamÃ¨tres du systÃ¨me</h2>
    </header>

    <section class="settings-grid">
      <!-- ThÃ¨me -->
      <div class="setting-card">
        <h3>ğŸ¨ ThÃ¨me</h3>
        <p>Choisissez le style visuel du back-office</p>
        <select id="themeSelect">
          <option value="light">Clair (par dÃ©faut)</option>
          <option value="dark">Sombre</option>
          <option value="lunar">Lunaire ğŸŒ™</option>
        </select>
        <button class="btn-save" onclick="saveTheme()">ğŸ’¾ Sauvegarder</button>
      </div>

      <!-- Langue -->
      <div class="setting-card">
        <h3>ğŸŒ Langue</h3>
        <p>SÃ©lectionnez la langue dâ€™administration</p>
        <select id="langSelect">
          <option value="fr">FranÃ§ais</option>
          <option value="en">English</option>
          <option value="es">EspaÃ±ol</option>
          <option value="th">à¹„à¸—à¸¢ (ThaÃ¯)</option>
          <option value="my">á€™á€¼á€”á€ºá€™á€¬ (Birman)</option>
          <option value="zh">ä¸­æ–‡ (Chinois)</option>
        </select>
        <button class="btn-save" onclick="saveLang()">ğŸ’¾ Appliquer</button>
      </div>

      <!-- SÃ©curitÃ© -->
      <div class="setting-card">
        <h3>ğŸ”’ SÃ©curitÃ©</h3>
        <p>Changer le mot de passe administrateur</p>
        <input type="password" id="newPassword" placeholder="Nouveau mot de passe..." />
        <button class="btn-save" onclick="updatePassword()">ğŸ—ï¸ Mettre Ã  jour</button>
      </div>

      <!-- Informations systÃ¨me -->
      <div class="setting-card">
        <h3>ğŸ§  Informations systÃ¨me</h3>
        <ul>
          <li><b>Version de lâ€™app :</b> 1.0.0</li>
          <li><b>Date du build :</b> Novembre 2025</li>
          <li><b>DerniÃ¨re sauvegarde :</b> <span id="lastBackup">Non disponible</span></li>
        </ul>
        <button class="btn-export" onclick="doBackup()">ğŸ“¦ Sauvegarder maintenant</button>
      </div>
    </section>
  </main>

  <script src="assets/admin.js"></script>

  <script>
    function saveTheme() {
      const theme = document.getElementById("themeSelect").value;
      localStorage.setItem("adminTheme", theme);
      alert("ğŸ¨ ThÃ¨me appliquÃ© : " + theme);
      document.body.dataset.theme = theme;
    }

    function saveLang() {
      const lang = document.getElementById("langSelect").value;
      localStorage.setItem("adminLang", lang);
      alert("ğŸŒ Langue changÃ©e : " + lang.toUpperCase());
    }

    function updatePassword() {
      const pwd = document.getElementById("newPassword").value;
      if (!pwd) return alert("Veuillez entrer un mot de passe.");
      localStorage.setItem("adminPwd", pwd);
      alert("ğŸ”’ Mot de passe mis Ã  jour !");
      document.getElementById("newPassword").value = "";
    }

    function doBackup() {
      const now = new Date().toLocaleString();
      localStorage.setItem("lastBackup", now);
      document.getElementById("lastBackup").textContent = now;
      alert("âœ… Sauvegarde enregistrÃ©e !");
    }

    // Charger le thÃ¨me et la langue au dÃ©marrage
    window.addEventListener("load", () => {
      const theme = localStorage.getItem("adminTheme") || "light";
      const lang = localStorage.getItem("adminLang") || "fr";
      document.getElementById("themeSelect").value = theme;
      document.getElementById("langSelect").value = lang;
      document.body.dataset.theme = theme;

      const backup = localStorage.getItem("lastBackup");
      if (backup) document.getElementById("lastBackup").textContent = backup;
    });
  </script>
</body>
</html>
